---
author: DBlogAdmin
comments: false
date: 2019-11-06 12:30:29+00:00
layout: post
link: https://dlang.org/blog/2019/11/06/dmd-2-089-0-released/
slug: dmd-2-089-0-released
title: DMD 2.089.0 Released
wordpress_id: 2231
categories:
- Compilers &amp; Tools
- DMD Releases
- News
---

![Digital Mars logo](http://dlang.org/blog/wp-content/uploads/2016/08/d6.png)The latest release of DMD, the D reference compiler, [is ready for download](https://dlang.org/download.html). It’s a relatively light release in terms of changes and features, with [11 major changes and 66 closed Bugzilla issues](https://dlang.org/changelog/2.089.0.html). Most of the changes cover narrow use cases. To highlight a few: proper non-D mangling in template mixins, a renamed default linker, and expanded support in DUB for LDC.


### Proper non-D mangling in template mixins


Maintainers of C bindings, or anyone writing D programs that need to interface with a custom C codebase, may find this change particularly useful. Previously, symbols declared as `extern(C)`, `extern(Windows)`(which is `stdcall`), and `extern(Objective-C)` [in template mixins](https://dlang.org/spec/template-mixin.html) were [improperly mangled as D symbols](https://dlang.org/changelog/2.089.0.html#mixin_template_mangling) when the templates were mixed in at global scope. It was easy to work around if you didn't need parameterization (just use string mixins), but if you did need it, then you were either stuck or had to jump through hoops.

The root of the issue was that a template mixin introduces a new scope at the point it’s mixed in and creates aliases to the declarations inside that scope so that they may be accessed externally without the need for dot notation. This is a major convenience when only one instance of the template is mixed into a scope (as is the usual case) and allows for code to be written as if the template mixin doesn't exist. In other words:

```d
mixin template Foo(T)
{
    T x;
}

mixin Foo;

// Not required
// mixin Foo f;

// Allows this:
int main()
{
    x = 10;

    // Not required
    // f.x = 10;
}
```
The additional scope meant that, e.g., an `extern(C)` symbol in a template mixin was never in global scope, so it was mangled as a D symbol rather than a C symbol. With the change, such symbols are promoted from the mixin scope to the global scope and are properly mangled. Now you can choose either string mixins or template mixins for your C/stdcall /Objective-C boilerplate.


### No more link.exe conflict


From the first alpha release of DMD, [OPTLINK has been the default linker](https://www.digitalmars.com/ctg/optlink.html) that ships with the compiler on Windows. When Walter Bright first started working on DMD, he used the existing C compiler backend he had been maintaining for 20 years. Since the backend already output object files in the Intel OMF format, he also decided to make use of OPTLINK; it had become a part of the C and C++ compiler package while he was at Borland. It was several years later that he added support Microsoft’s MSCOFF (PE) and the Microsoft linker, cl, to DMD. The fact that both the OPTLINK and cl executables were named `link.exe` wasn’t an issue early on, but over time it has begun to pop up more often, particularly when performing the compile and link steps separately.

With DMD 2.089, it will never be an issue again. The version of OPTLINK that ships with DMD [has been renamed to `optlink.exe`](https://dlang.org/changelog/2.089.0.html#optlink).


### DUB and LDC


DUB, the D build tool and package manager, has shipped with DMD for several releases. When executing `dub` on a properly configured source package, DMD is the default compiler. It also supports LDC ([the LLVM-based D compiler](https://wiki.dlang.org/LDC)) and GDC ([the GCC-based D compiler](https://wiki.dlang.org/GDC), which [is part of GCC 9](https://gcc.gnu.org/gcc-9/changes.html)) via command-line options, but the full range of DUB features haven’t been available for those compilers.

The latest version [improves support for LDC](https://dlang.org/changelog/2.089.0.html#ldc2). DUB command-line options to enable code coverage, profiling, keeping the stack frame, and separate linking now work with LDC. Target triples can be given to the `--architecture` (`-a`) switch to enable cross-compilation with LDC.
