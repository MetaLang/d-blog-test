---
author: DBlogAdmin
comments: false
date: 2020-03-17 17:19:26+00:00
layout: post
link: https://dlang.org/blog/2020/03/17/d-2-091-0-released/
slug: d-2-091-0-released
title: D 2.091.0 Released
wordpress_id: 2332
categories:
- Compilers &amp; Tools
- DConf
- DMD Releases
- News
---

![Digital Mars D logo](http://dlang.org/blog/wp-content/uploads/2016/08/d6.png)The latest release of DMD, the D reference compiler, ships with [18 major changes and 66 bugfixes](https://dlang.org/changelog/2.091.0.html) [from 55 contributors](https://dlang.org/changelog/2.091.0.html#contributors). This release contains, among other goodies, improvements to the Windows experience and enhancements to C and C++ interoperability. As fate would have it, [the initial release announcement](https://forum.dlang.org/post/r484es$9sj$1@digitalmars.com) came in the aftermath of some unfortunate news [regarding DConf 2020](https://dconf.org/2020/index.html).


## DMD on Windows


Over the years, some D users have remarked that the development of D is Linux-centric, that Windows is [the black sheep](https://en.wikipedia.org/wiki/Black_sheep) or [red-headed stepchild](https://www.urbandictionary.com/define.php?term=red%20headed%20stepchild) of D platforms. For anyone familiar with D's early history, that seems an odd thing to say, given that DMD started out as a Windows-only compiler that could only output 32-bit objects in [the OMF format](https://en.wikipedia.org/wiki/Relocatable_Object_Module_Format). But it's also understandable, as anyone not familiar with that history could only see that DMD on Windows lagged behind the Linux releases.


### 64-bit


One place where the official DMD releases on Windows have continued to differ from the releases on other platforms is the lack of 64-bit binaries in the release packages. Again, there's a historical reason for this. The default output of the compiler is determined by how it is compiled, e.g., 32-bit versions output 32-bit binaries by default. When Walter first added support to DMD for 64-bit output on Windows, it required giving the back end the ability to generate object files in Microsoft's version of [the COFF format](https://en.wikipedia.org/wiki/COFF) and also requiring users to install the Microsoft Build Tools and Platform SDK for access to the MS linker and system link libraries. This is quite a different experience from other platforms, where you can generally expect a common set of build tools to have been installed via the system package manager on any system set up for C and C++ development.

For a Windows developer who chooses GCC for their C and C++ development (or who does no C or C++ development at all), it's a big ask to require them to download and install several GBs they might not already have installed and probably will never use for anything else. So D releases on Windows continued to ship with 32-bit binaries and the OPTLINK linker in order to provide a minimum out-of-the-box experience. That was a perfectly fine solution, unless you happened to be someone who really wanted 64-bit output (posts from disgruntled Windows users who didn't want to install the MS tools can be found sprinkled throughout the forum archives).

Eventually, the LLVM linker (LLD) was added to the DMD Windows release packages, along with system link libraries generated from [the MinGW definitions](http://mingw-w64.org/doku.php). This allowed users to compile 64-bit output out of the box and, once the kinks were worked out, eliminated the dependency on the MS linker. Yet, the official release packages still did not include a 64-bit version of DMD and still did not support 64-bit output by default.

With DMD 2.091.0, the black sheep has come back into the fold. The official DMD releases on Windows now ship with 64-bit binaries, so those of you masochists out there who cling to Makefiles and custom build scripts can expect the default output be what you expect it to be (for the record, DUB, [the build tool and package manager](https://dub.pm/getting_started) that ships with DMD, has been instructing the compiler to compile 64-bit output by default on 64-bit systems for the past few releases).


### Windows gets even more love


There are lots of goodies for Windows in this release. Another biggie is that DMD is now 30-40% faster on Windows. It's no secret that LDC, [the LLVM-based D compiler](https://wiki.dlang.org/LDC), generates faster binaries than DMD (for some D users, the general rule of thumb is to develop with DMD for its fast compile times and release with LDC for its faster binaries, though others argue that LDC is plenty fast for development and DMD is fine for production). There have been requests for some time to stop compiling DMD with DMD and start doing it with LDC instead. This release is the first to put that into practice.

There are a number of smaller enhancements to the Windows experience: the install.sh script available on [the DMD downloads page](https://dlang.org/download.html) that some people prefer now supports POSIX environments on Windows; the system link libraries that ship with the compiler have been upgraded from MinGWÂ  5.0.2 to 7.0.0; LLD has been upgraded to 9.0.0; and [there's plenty more in the changelog](https://dlang.org/changelog/2.091.0.html#install-sh-windows).


## C++ Header Generation


With just about every major release of DMD, D's interoperability with C and C++ sees some kind of improvement. This release brings a huge one.

Over the years, some have speculated that it would be excellent if the D compiler could generate headers for C and C++ for D libraries intended to be usable in C or C++ programs. Now that wishful thinking has become a(n experimental) reality. Given a set of `extern(C)` or `extern(C++)` functions, DMD can generate header files that contain the appropriate C or C++ declarations. Three compiler switches get the job done:



 	
  * `-HC` will cause the header to be generated and printed to standard output

 	
  * `-HCf=fileName` will cause the header to be generated and printed to the specified file

 	
  * `-HCd=directoryname` will (once it's implemented) cause the header to be printed to a file in the specified directory


[See the changelog for example output](https://dlang.org/changelog/2.091.0.html#headers).


## Other News


While the Corona virus was initially ramping up out of sight from most of the world, plans for DConf 2020 were ramping up online from different locations around the world. Planning began in November, the venue was secured in late December, and [the website launched](https://dconf.org/2020/index.html) with [the announcement in early January](https://dlang.org/blog/2020/01/04/dconf-2020-double-decker-edition/).

As news of the virus outbreak spread, the conference organizers grew concerned. Would we be okay in June? In late February, that concern manifested as a discussion of possible contingency plans. Two weeks later, it resulted in the decision to cancel DConf 2020. Thankfully, the D community has been supportive of the decision.

As part of the discussion of contingency plans, the possibility was raised of hosting an online conference. The idea of course came up in the discussion of the cancellation in the forums, and a few people reached out shortly after the initial announcement offering to provide help in setting something up. Walter [created a forum thread](https://forum.dlang.org/post/r4p7b6$np6$1@digitalmars.com) to discuss the topic for anyone interested.

No one involved with organizing DConf has any experience with hosting an online conference. We're currently exploring options and looking at what the organizers of other Conferences in the Time of COVID-19 are doing. We want to do it, and we want to do it well. Experience with organizing DConf in the real world has taught us not to jump on any old technology without first having a fallback (ahem, [DConf 2018 livestream](https://dlang.org/blog/2018/05/31/dconf-2018-ex-post-facto/)) and making sure the tech does what we expect it to (ahem, [DConf 2019 livestream](https://dlang.org/blog/2019/06/17/dconf-2019-recap/)). So don't expect a quick announcement. We want to find the right tech that fits our requirements and explore how it works before we move forward with setting dates. But do expect that DConf 2020 Online is looking more and more likely to become a thing.
